# User Flow Diagrams

## Email Signup Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SIGNUP FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /login  â”‚
â”‚          â”‚
â”‚ User     â”‚
â”‚ clicks   â”‚
â”‚ "Sign Up"â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enter:             â”‚
â”‚ - Name             â”‚
â”‚ - Email            â”‚
â”‚ - Password (8+)    â”‚  â—„â”€â”€ Must have:
â”‚   â€¢ Uppercase      â”‚      â€¢ Uppercase letter
â”‚   â€¢ Lowercase      â”‚      â€¢ Lowercase letter  
â”‚   â€¢ Number         â”‚      â€¢ Number
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account Created    â”‚
â”‚ âœ“ User record      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /phone-setup      â”‚â”€â”€â”€â”€â–¶â”‚ Enter Phone Number  â”‚
â”‚                    â”‚     â”‚ +91 XXXXXXXXXX      â”‚
â”‚ Step 1: Phone      â”‚     â”‚ (10 digits)         â”‚
â”‚ MANDATORY âš ï¸       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
     â”‚                                â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ Phone Saved âœ“
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Picture    â”‚â”€â”€â”€â”€â–¶â”‚ Upload Photo        â”‚
â”‚ (Optional)         â”‚     â”‚ - JPG/PNG/GIF       â”‚
â”‚                    â”‚     â”‚ - Max 5MB           â”‚
â”‚ Can skip â†’         â”‚     â”‚ - Preview shown     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                               â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ Picture saved or skipped
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /onboarding       â”‚â”€â”€â”€â”€â–¶â”‚ Select Role:        â”‚
â”‚                    â”‚     â”‚ â–¡ Renter            â”‚
â”‚ Choose role &      â”‚     â”‚ â–¡ Provider          â”‚
â”‚ complete profile   â”‚     â”‚ â–¡ Labour            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                               â”‚
     â”‚                               â”‚
     â–¼                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ Enter:             â”‚              â”‚
â”‚ - Address          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - PIN code         â”‚
â”‚ - Get Location     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Dashboard!       â”‚
â”‚ /provider/         â”‚
â”‚ /renter/           â”‚
â”‚ /labour/           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Google Signup Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GOOGLE OAUTH FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /login  â”‚
â”‚          â”‚
â”‚ Click:   â”‚
â”‚ "Continueâ”‚
â”‚ with     â”‚
â”‚ Google"  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Google OAuth       â”‚
â”‚ Popup              â”‚
â”‚                    â”‚
â”‚ Select account     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /auth/callback     â”‚
â”‚                    â”‚
â”‚ Process OAuth      â”‚
â”‚ token              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Extract data:      â”‚
     â”‚ âœ“ Name             â”‚
     â”‚ âœ“ Email            â”‚
     â”‚ âœ“ Picture          â”‚
     â”‚ ? Phone            â”‚â—„â”€â”€â”€â”€ May or may not have
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Has phone?     â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€ YES â”€â”€â”€â”€â”
          â”‚            â”‚
          â”‚            â–¼
          â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚       â”‚ Save phone     â”‚
          â”‚       â”‚ from Google    â”‚
          â”‚       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚            â”‚
          â”‚            â–¼
          â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚       â”‚ Profile        â”‚
          â”‚       â”‚ complete?      â”‚
          â”‚       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚            â”‚
          â”‚            â”œâ”€ YES â”€â”€â–¶ Dashboard
          â”‚            â”‚
          â”‚            â””â”€ NO â”€â”€â”€â–¶ /onboarding
          â”‚
          â””â”€â”€â”€ NO â”€â”€â”€â”€â”
                      â”‚
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ /phone-setup   â”‚
                 â”‚                â”‚
                 â”‚ Request phone  â”‚
                 â”‚ MANDATORY âš ï¸   â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Enter phone    â”‚
                 â”‚ +91 XXXXXXXXXX â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Upload picture â”‚
                 â”‚ (optional)     â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ /onboarding    â”‚
                 â”‚ if incomplete  â”‚
                 â”‚ OR             â”‚
                 â”‚ Dashboard      â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LOGIN FLOW                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /login  â”‚
â”‚          â”‚
â”‚ Enter:   â”‚
â”‚ - Email  â”‚
â”‚ - Pass   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authenticate       â”‚
â”‚ with Supabase      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Get user       â”‚
     â”‚ profile        â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Check:         â”‚
     â”‚ 1. Phone?      â”‚
     â”‚ 2. Complete?   â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€ No Phone â”€â”€â”€â”€â”
          â”‚                 â”‚
          â”‚                 â–¼
          â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚            â”‚ /phone-setup   â”‚
          â”‚            â”‚                â”‚
          â”‚            â”‚ MUST add phone â”‚
          â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€ No Complete â”€â”
          â”‚                 â”‚
          â”‚                 â–¼
          â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚            â”‚ /onboarding    â”‚
          â”‚            â”‚                â”‚
          â”‚            â”‚ Finish setup   â”‚
          â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â””â”€â”€â”€ Complete â”€â”€â”€â”€â”
                            â”‚
                            â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚ Dashboard!     â”‚
                       â”‚                â”‚
                       â”‚ Based on role: â”‚
                       â”‚ â€¢ Provider     â”‚
                       â”‚ â€¢ Renter       â”‚
                       â”‚ â€¢ Labour       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Profile Edit Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROFILE EDIT FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Any page â”‚
â”‚          â”‚
â”‚ Click    â”‚
â”‚ avatar â†’ â”‚
â”‚ "Profile"â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /profile          â”‚
â”‚                    â”‚
â”‚ VIEW MODE:         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  [Profile Pic] â”‚ â”‚
â”‚ â”‚                â”‚ â”‚
â”‚ â”‚  Name          â”‚ â”‚
â”‚ â”‚  Email         â”‚ â”‚
â”‚ â”‚  Phone         â”‚ â”‚
â”‚ â”‚  Address       â”‚ â”‚
â”‚ â”‚  Member Since  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚
â”‚ [Edit Profile]     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Click Edit
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EDIT MODE:         â”‚
â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Upload Photo] â”‚ â”‚â—„â”€â”€ Change picture
â”‚ â”‚      [X]       â”‚ â”‚    Remove picture
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚
â”‚ Name:    [Input]   â”‚â—„â”€â”€ Edit fields
â”‚ Email:   [Input]   â”‚
â”‚ Phone:   [Input]   â”‚â—„â”€â”€ Validate: 10 digits
â”‚ Bio:     [Text]    â”‚
â”‚ Address: [Text]    â”‚
â”‚ PIN:     [Input]   â”‚â—„â”€â”€ Validate: 6 digits
â”‚                    â”‚
â”‚ [Cancel] [Save]    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Click Save
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validate:          â”‚
â”‚ âœ“ Name not empty   â”‚
â”‚ âœ“ Phone format OK  â”‚
â”‚ âœ“ PIN format OK    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save to database   â”‚
â”‚                    â”‚
â”‚ Update:            â”‚
â”‚ - user_profiles    â”‚
â”‚ - storage (pics)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Profile updated! â”‚
â”‚                    â”‚
â”‚ Return to          â”‚
â”‚ VIEW MODE          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phone Number Validation

```
Input: "9876543210"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Remove non-     â”‚
â”‚ numeric chars   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check length    â”‚
â”‚ Must be 10      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€ âœ— Not 10 â”€â”€â”€â”€â–¶ Error: "Must be 10 digits"
     â”‚
     â””â”€â”€â”€ âœ“ Is 10
          â”‚
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Check first     â”‚
     â”‚ digit           â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€ âœ— Not 6-9 â”€â”€â–¶ Error: "Invalid mobile number"
          â”‚
          â””â”€â”€â”€ âœ“ Is 6-9
               â”‚
               â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ âœ“ Valid phone!  â”‚
          â”‚ Format: +91     â”‚
          â”‚         XXXXXX  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Password Validation

```
Input: "Password123"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check length    â”‚
â”‚ >= 8 chars      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€â”€ âœ— < 8 â”€â”€â”€â”€â”€â–¶ Error: "Min 8 characters"
     â”‚
     â””â”€â”€â”€ âœ“ >= 8
          â”‚
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Has uppercase?  â”‚
     â”‚ [A-Z]           â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â”€ âœ— No â”€â”€â”€â”€â”€â”€â–¶ Error: "Need uppercase"
          â”‚
          â””â”€â”€â”€ âœ“ Yes
               â”‚
               â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Has lowercase?  â”‚
          â”‚ [a-z]           â”‚
          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€ âœ— No â”€â”€â”€â”€â”€â”€â–¶ Error: "Need lowercase"
               â”‚
               â””â”€â”€â”€ âœ“ Yes
                    â”‚
                    â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ Has number?     â”‚
               â”‚ [0-9]           â”‚
               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”œâ”€â”€â”€ âœ— No â”€â”€â”€â”€â”€â”€â–¶ Error: "Need number"
                    â”‚
                    â””â”€â”€â”€ âœ“ Yes
                         â”‚
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ âœ“ Valid!        â”‚
                    â”‚ Create account  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Storage Architecture

```
Supabase Storage
â”‚
â”œâ”€â”€ avatars/                (5MB limit per file)
â”‚   â””â”€â”€ profile-pictures/
â”‚       â”œâ”€â”€ {userId}-{timestamp}.jpg
â”‚       â”œâ”€â”€ {userId}-{timestamp}.png
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ equipment-images/       (10MB limit per file)
    â””â”€â”€ {equipmentId}/
        â”œâ”€â”€ image-1.jpg
        â”œâ”€â”€ image-2.jpg
        â””â”€â”€ ...

Policies:
- Authenticated users can upload/update their avatars
- Anyone can view (public buckets)
- Users can only modify their own files
```

---

## State Management

```
Auth Store (Zustand)
â”œâ”€â”€ State
â”‚   â”œâ”€â”€ user: User | null
â”‚   â”œâ”€â”€ profile: UserProfile | null
â”‚   â”œâ”€â”€ roles: UserRole[]
â”‚   â”œâ”€â”€ activeRole: UserRole | null
â”‚   â”œâ”€â”€ isLoading: boolean
â”‚   â””â”€â”€ isInitialized: boolean
â”‚
â””â”€â”€ Actions
    â”œâ”€â”€ initialize()
    â”‚   â””â”€â”€ Load user + profile on app start
    â”‚
    â”œâ”€â”€ fetchProfile()
    â”‚   â””â”€â”€ Get profile from database
    â”‚
    â”œâ”€â”€ refreshProfile()  â† NEW
    â”‚   â””â”€â”€ Reload profile + roles
    â”‚
    â”œâ”€â”€ switchRole(role)
    â”‚   â””â”€â”€ Change active role
    â”‚
    â””â”€â”€ signOut()
        â””â”€â”€ Logout + clear state

Flow:
App Start â†’ initialize() â†’ fetchProfile() â†’ fetchRoles()
Login â†’ initialize() â†’ redirect based on profile
Update â†’ refreshProfile() â†’ re-render components
```

---

## Key Decision Points

### After Signup
```
User created
    â”‚
    â–¼
Has phone? â”€â”€â”€ NO â”€â”€â–¶ /phone-setup (MANDATORY)
    â”‚
    YES
    â–¼
Profile complete? â”€â”€â”€ NO â”€â”€â–¶ /onboarding
    â”‚
    YES
    â–¼
Dashboard
```

### After Google OAuth
```
OAuth success
    â”‚
    â–¼
Has phone? â”€â”€â”€ NO â”€â”€â–¶ /phone-setup (MANDATORY)
    â”‚
    YES
    â–¼
Profile complete? â”€â”€â”€ NO â”€â”€â–¶ /onboarding
    â”‚
    YES
    â–¼
Dashboard
```

### After Login
```
Authenticated
    â”‚
    â–¼
Has phone? â”€â”€â”€ NO â”€â”€â–¶ /phone-setup
    â”‚
    YES
    â–¼
Profile complete? â”€â”€â”€ NO â”€â”€â–¶ /onboarding
    â”‚
    YES
    â–¼
Update last_login
    â”‚
    â–¼
Dashboard
```

---

## Important Notes

âš ï¸ **MANDATORY STEPS:**
- Phone number collection cannot be skipped
- Must complete before accessing dashboard

âœ“ **OPTIONAL STEPS:**
- Profile picture upload (can skip or add later)
- Bio and additional info (can complete in profile page)

ğŸ” **SECURITY:**
- All routes protected by middleware
- RLS policies on database
- Secure file upload
- Password validation enforced

---

*This visual guide complements the technical documentation in AUTH_PROFILE_GUIDE.md*
